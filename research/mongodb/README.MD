# Тестирование MongoDB
Для тестирования был поднят кластер MongoDB в docker на основе образа mongo:6.0 из 2 шардов по 3 реплики, 3 сервера конфигурации и 2 маршрутизатора.
При использовании стандартного движка хранения WiredTiger, используются следующие алгоритмы сжатия:
- zstd (MongoDB 4.2)
- zlib


## Запуск
1. Запустить инфраструктуру

    make start

2. Выполнить первоначальную настройку. Убедиться, что инициализация прошла успешно. При ошибке повторить команду
    
    make init

3. Тестирование

    make full-test

## Запись 
Для тестирования скорости записи были произведены операции на добавление 1M документов в коллекцию профилей пользователей. Результат:

- 1k    - 1.90s
- 10к   - 21.15s
- 100к  - 187.39s

## Чтение 
Чтение производилось с агрегированием для формирования массива данных под задачи проекта.

### Коллаборативная подборка фильмов
Случайный выбор профиля пользователя с набором просмотренных фильмов и поиск по базе (1M документов) аналогичных просмотров занимает
от 1.5s до 0.7s
